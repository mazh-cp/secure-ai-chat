# Webpack Chunk Error Fix

## Error Description
```
Error: Cannot find module './682.js'
Require stack:
- .next/server/webpack-runtime.js
```

This error occurs when Next.js webpack runtime cannot find a required chunk file.

## Root Cause
This typically happens when:
1. **Stale build cache**: The `.next` directory has outdated chunk references
2. **Dev server mismatch**: Dev server running with old build while dependencies changed
3. **Incomplete build**: Build was interrupted or failed partway through
4. **Dependency changes**: After `npm install`, the build cache needs to be refreshed

## Solution

### Step 1: Stop All Dev Servers
If you have dev servers running (`npm run dev`), stop them:
```bash
# Press Ctrl+C in the terminal running the dev server
# Or kill all Next.js processes:
pkill -f "next dev"
pkill -f "next-server"

# Verify they're stopped:
ps aux | grep -E "(next|node.*dev)" | grep -v grep
# Should show no results
```

### Step 2: Clear Build Cache
```bash
# Remove the .next directory completely
rm -rf .next

# Optional: Also clear node_modules cache if issues persist
# rm -rf node_modules/.cache
```

### Step 3: Rebuild
```bash
# Rebuild the application
npm run build
```

### Step 4: Restart Dev Server
```bash
# Start fresh dev server
npm run dev
```

## Complete Clean Install (If Above Doesn't Work)

If the error persists, do a complete clean install:

```bash
# 1. Stop any running processes
pkill -f "next dev"

# 2. Clear all caches
rm -rf .next node_modules package-lock.json

# 3. Clear npm cache (optional but recommended)
npm cache clean --force

# 4. Reinstall dependencies
npm install

# 5. Rebuild
npm run build

# 6. Start dev server
npm run dev
```

## Prevention

To avoid this issue in the future:

1. **Always stop dev server before**: 
   - Running `npm install`
   - Running `npm run build`
   - Making dependency changes
   - Clearing `.next` directory

2. **Clear cache after dependency changes**:
   ```bash
   # Stop dev server first!
   pkill -f "next dev"
   rm -rf .next
   npm run build
   npm run dev  # Restart dev server
   ```

3. **Check for multiple dev servers**:
   ```bash
   # If you see multiple Next.js processes, kill them all:
   ps aux | grep -E "(next|node.*dev)"
   pkill -f "next dev"
   pkill -f "next-server"
   ```

4. **Use production build for testing**:
   ```bash
   npm run build
   npm start  # Use production server instead of dev
   ```

5. **After clean install, always rebuild**:
   ```bash
   rm -rf node_modules package-lock.json .next
   npm install
   npm run build  # Important: rebuild after install
   npm run dev
   ```

## Verification

After applying the fix, verify:
```bash
# Check that build succeeds
npm run build

# Check that dev server starts without errors
npm run dev

# Visit http://localhost:3000 and verify no errors in console
```

## Related Issues

- **Module not found errors**: Usually resolved by clearing `.next` and rebuilding
- **Webpack runtime errors**: Always clear `.next` directory
- **Chunk loading errors**: Rebuild after dependency changes

## Notes

- The chunk file numbers (like `682.js`) are generated by webpack and can change between builds
- This is why clearing `.next` fixes the issue - it forces webpack to regenerate all chunks
- In production, always use `npm run build` before `npm start` to ensure chunks are up-to-date
